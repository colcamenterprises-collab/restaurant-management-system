Restaurant Management Dashboard - Complete Operational Documentation

Project Overview

The Restaurant Management Dashboard is a comprehensive full-stack web application designed for "Smash Brothers Burgers" restaurant operations. This system provides AI-powered analytics, real-time POS integration, inventory management, and automated operational insights to streamline daily restaurant management.

Business Purpose
- Primary Function: Centralized restaurant operations management
- Target User: Restaurant managers and staff
- Key Value: Automated data analysis, inventory tracking, and operational insights
- Operational Hours: Supports 5:00 PM - 3:00 AM shift cycles (Bangkok timezone)

Technical Architecture

Frontend Stack
- Framework: React 18 with TypeScript
- Build Tool: Vite (development and production builds)
- UI Library: shadcn/ui components built on Radix UI primitives
- Styling: Tailwind CSS with custom restaurant-specific design tokens
- State Management: TanStack Query (React Query) for server state
- Routing: Wouter (lightweight client-side routing)
- Forms: React Hook Form with Zod validation

Backend Stack
- Runtime: Node.js with Express.js framework
- Language: TypeScript with ES modules
- API Design: RESTful API with centralized route handling
- Database: PostgreSQL (Neon Database - serverless)
- ORM: Drizzle ORM for type-safe database operations
- Session Management: PostgreSQL-based sessions with connect-pg-simple

Development Environment
- Platform: Replit (web-based development environment)
- Package Manager: npm
- Hot Reload: Full-stack hot reloading via Vite
- TypeScript: Strict mode with path mapping

Core System Components

1. Main Dashboard
File: client/src/pages/Dashboard.tsx
Purpose: Central hub showing real-time operational metrics
Features:
- Real-time KPI cards (sales, orders, cash balances)
- AI insights from latest analysis
- Sales vs expenses charts
- Roll variance tracking for burger inventory
- Quick action buttons for common tasks

2. Daily Stock & Sales Form
File: client/src/pages/DailyStockSalesSimple.tsx
Purpose: Staff shift reporting and inventory tracking
Features:
- Shift sales reporting (cash, card, delivery platforms)
- Inventory stock counts for all categories
- Expense tracking with receipt photos
- Shopping list auto-generation
- Email notifications to management
- Draft saving and form history

3. AI Analysis System
File: client/src/pages/Analysis.tsx
Purpose: AI-powered analysis of Loyverse POS reports
Features:
- Multiple file upload (CSV, Excel, PDF)
- Batch processing with progress tracking
- OpenAI GPT-4o integration for data extraction
- Analysis results with sales summaries and anomaly detection
- Historical analysis search and retrieval

4. POS Integration (Loyverse)
File: client/src/pages/LoyverseLive.tsx
Purpose: Real-time integration with Loyverse POS system
Features:
- Live receipt synchronization
- Shift report management
- Webhook configuration for real-time updates
- Manual sync capabilities
- Connection status monitoring

5. Expense Management
File: client/src/pages/ExpensesMerged.tsx
Purpose: Business expense tracking and analysis
Features:
- Expense entry with categorization
- Bank statement upload and AI analysis
- Supplier management
- Monthly expense summaries

6. Recipe & Ingredient Management
File: client/src/pages/RecipeManagement.tsx
Purpose: Menu item recipes and ingredient cost tracking
Features:
- Recipe creation and editing
- Ingredient cost management
- Marketing content generation (AI-powered)
- Category-based organization

7. Shopping List Management
File: client/src/pages/ShoppingList.tsx
Purpose: Automated procurement management
Features:
- Auto-generated from inventory needs
- Supplier integration
- Priority-based organization
- Completion tracking

Database Schema

Core Tables

uploaded_reports
- Stores Loyverse report files for AI analysis
- Fields: filename, fileType, fileData, shiftDate, analysisSummary, uploadedAt, analyzedAt, isAnalyzed

daily_stock_sales
- Staff shift reports and inventory data
- Fields: completedBy, shift, formDate, sales data, inventory counts, expenses

loyverse_receipts
- Real-time POS transaction data
- Fields: receiptNumber, totalAmount, items, paymentMethods, customerInfo

inventory
- Current stock levels and supplier information
- Fields: name, category, quantity, unit, minStock, supplier, pricePerUnit

shopping_list
- Automated and manual procurement lists
- Fields: itemName, quantity, supplier, priority, listDate, formId

expenses
- Business expense tracking
- Fields: description, amount, category, supplier, receiptPhoto, date

External Integrations

1. Loyverse POS API
Purpose: Real-time sales data synchronization
Authentication: API token stored in environment variables
Key Endpoints:
- /receipts - Transaction data
- /shifts - Shift summaries
- /items - Menu items and modifiers
- Webhook support for real-time updates

2. OpenAI API (GPT-4o)
Purpose: AI-powered analysis of reports and receipts
Authentication: API key in environment variables
Usage:
- Report analysis and data extraction
- Anomaly detection in sales patterns
- Marketing content generation
- Expense categorization

3. Gmail API
Purpose: Automated email notifications
Authentication: OAuth2 with refresh token
Usage:
- Daily management summary emails
- Form submission notifications
- Shopping list distribution

Environment Variables (Required)

Database
- DATABASE_URL - PostgreSQL connection string (Neon Database)

External APIs
- LOYVERSE_API_TOKEN - Loyverse POS API authentication
- LOYVERSE_STORE_ID - Restaurant store identifier
- LOYVERSE_WEBHOOK_SECRET - Webhook signature validation
- OPENAI_API_KEY - OpenAI API access for AI analysis

Email System
- GOOGLE_CLIENT_ID - Gmail API OAuth client ID
- GOOGLE_CLIENT_SECRET - Gmail API OAuth client secret
- GOOGLE_REFRESH_TOKEN - Gmail API refresh token for authentication

Application
- NODE_ENV - Environment mode (development/production)
- SESSION_SECRET - Session encryption secret

Automated Processes

1. Daily Receipt Sync
Schedule: 3:00 AM Bangkok time (daily)
Purpose: Synchronize previous shift receipts from Loyverse
Implementation: Node-cron scheduler in server/index.ts

2. Daily Management Reports
Schedule: 8:00 AM Bangkok time (daily)
Purpose: Email summary of previous shift operations
Content: Sales summary, cash balances, shopping lists, anomalies

3. Real-time Webhooks
Triggers: Receipt creation/updates in Loyverse POS
Purpose: Immediate data synchronization
Security: SHA-1 HMAC signature validation

Key Operational Workflows

1. Daily Shift Workflow
1. Staff opens Daily Stock & Sales form
2. Records sales by payment method
3. Conducts inventory counts
4. Records expenses and purchases
5. Submits form (triggers email to management)
6. System auto-generates shopping list
7. Management receives summary email at 8 AM

2. AI Analysis Workflow
1. Upload Loyverse reports (CSV/Excel/PDF)
2. System extracts text content
3. OpenAI analyzes for key metrics
4. Results stored with anomaly detection
5. Dashboard updated with insights

3. Inventory Management Workflow
1. Daily stock counts via form submission
2. Auto-calculation of usage rates
3. Shopping list generation when low stock
4. Supplier integration for ordering
5. Receipt tracking for cost analysis

Deployment Instructions

Prerequisites
1. Replit account with sufficient compute resources
2. Neon Database account (PostgreSQL)
3. API keys for Loyverse, OpenAI, and Gmail

Setup Process
1. Clone/Import Project: Import into Replit workspace
2. Environment Setup: Configure all required environment variables
3. Database Migration: Run npm run db:push to sync schema
4. Dependency Installation: Run npm install (handled automatically)
5. Development Start: Run npm run dev (port 5000)
6. Production Build: Run npm run build and npm start

Initial Configuration
1. Set up Loyverse webhook endpoints in POS system
2. Configure Gmail OAuth and generate refresh token
3. Initialize database with basic inventory items
4. Test email notifications and AI analysis
5. Verify POS data synchronization

Troubleshooting Guide

Common Issues

Database Connection Errors
- Verify DATABASE_URL environment variable
- Check Neon Database connection status
- Run npm run db:push to sync schema

API Integration Failures
- Verify all API keys are correctly set
- Check API rate limits and quotas
- Review webhook signature validation

Email Notification Issues
- Verify Gmail OAuth tokens are valid
- Check Google Cloud Console permissions
- Test email delivery manually

Form Submission Errors
- Check database schema compatibility
- Verify Zod validation schemas
- Review error logs for specific issues

Performance Optimization
- Monitor database query performance
- Optimize image upload sizes (auto-compression enabled)
- Use proper indexes on frequently queried columns
- Cache frequently accessed data with TanStack Query

Security Considerations

Data Protection
- All sensitive data stored in environment variables
- Database connections use SSL encryption
- File uploads validated and sanitized
- Session management with secure cookies

API Security
- Webhook signature validation for external APIs
- Rate limiting on critical endpoints
- Input validation with Zod schemas
- Error handling without sensitive data exposure

Access Control
- User authentication required for all operations
- Session-based access control
- Secure password handling (if user accounts implemented)

Maintenance Procedures

Daily Tasks
- Monitor automated email delivery
- Verify POS data synchronization
- Check for any system errors in logs

Weekly Tasks
- Review database performance
- Update ingredient costs
- Analyze AI insights for operational improvements

Monthly Tasks
- Review and clean old data
- Update dependencies if needed
- Analyze expense trends and cost optimization

Contact Information & Support

Technical Support
- Primary codebase: Replit workspace
- Documentation: This file and replit.md
- Error logs: Available in Replit console

Business Context
- Restaurant: Smash Brothers Burgers
- Operating hours: 5:00 PM - 3:00 AM (Bangkok time)
- Shift reporting: Staff complete forms at end of shift (2:00-3:00 AM)

---

Last Updated: July 19, 2025
Documentation Version: 1.0
System Status: Production Ready

This documentation provides everything needed to understand, maintain, and rebuild the Restaurant Management Dashboard system from scratch.