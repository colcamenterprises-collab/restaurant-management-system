 1. Prisma Schema (schema.prisma)
Add this to your Prisma model:

ts
Copy
Edit
model DailySales {
  id              String   @id @default(uuid())
  shiftDate       Date
  cashSales       Float
  qrSales         Float
  grabSales       Float
  aroiDeeSales    Float
  discounts       Float
  refunds         Float
  expenses        Json     // [{ item: string, amount: number }]
  amountBanked    Float
  notes           String?
  createdAt       DateTime @default(now())
}
Then run:

bash
Copy
Edit
npx prisma generate
npx prisma migrate dev --name add_daily_sales
âš›ï¸ 2. React Form Page (/pages/daily-sales.tsx)
tsx
Copy
Edit
import { useState } from 'react';
import axios from 'axios';

export default function DailySalesForm() {
  const [form, setForm] = useState({
    shiftDate: '',
    cashSales: '',
    qrSales: '',
    grabSales: '',
    aroiDeeSales: '',
    discounts: '',
    refunds: '',
    amountBanked: '',
    notes: '',
    expenses: [{ item: '', amount: '' }],
  });

  const handleChange = (field: string, value: string) => {
    setForm((prev) => ({ ...prev, [field]: value }));
  };

  const handleExpenseChange = (index: number, field: string, value: string) => {
    const updated = [...form.expenses];
    updated[index][field] = value;
    setForm((prev) => ({ ...prev, expenses: updated }));
  };

  const addExpense = () => {
    setForm((prev) => ({
      ...prev,
      expenses: [...prev.expenses, { item: '', amount: '' }],
    }));
  };

  const handleSubmit = async (e: any) => {
    e.preventDefault();
    const res = await axios.post('/api/daily-sales', form);
    const salesId = res.data.id;
    window.location.href = `/daily-stock?salesId=${salesId}`;
  };

  return (
    <div className="p-6 max-w-2xl mx-auto">
      <h1 className="text-2xl font-bold mb-4">Daily Sales Form</h1>
      <form onSubmit={handleSubmit} className="space-y-4">
        <input type="date" value={form.shiftDate} onChange={(e) => handleChange('shiftDate', e.target.value)} required className="input" />

        <div className="grid grid-cols-2 gap-4">
          {['cashSales', 'qrSales', 'grabSales', 'aroiDeeSales', 'discounts', 'refunds', 'amountBanked'].map((field) => (
            <input
              key={field}
              type="number"
              step="0.01"
              placeholder={field}
              value={form[field as keyof typeof form] as string}
              onChange={(e) => handleChange(field, e.target.value)}
              className="input"
            />
          ))}
        </div>

        <div>
          <label className="font-bold">Expenses</label>
          {form.expenses.map((exp, i) => (
            <div key={i} className="flex gap-2 mb-2">
              <input type="text" placeholder="Item" value={exp.item} onChange={(e) => handleExpenseChange(i, 'item', e.target.value)} className="input" />
              <input type="number" step="0.01" placeholder="Amount" value={exp.amount} onChange={(e) => handleExpenseChange(i, 'amount', e.target.value)} className="input" />
            </div>
          ))}
          <button type="button" onClick={addExpense} className="text-blue-600 underline">+ Add Expense</button>
        </div>

        <textarea placeholder="Notes" value={form.notes} onChange={(e) => handleChange('notes', e.target.value)} className="input w-full h-24" />

        <button type="submit" className="bg-black text-white px-4 py-2 rounded">Submit & Go to Stock Form</button>
      </form>
    </div>
  );
}
ðŸ“¡ 3. API Route: /pages/api/daily-sales.ts
ts
Copy
Edit
import { prisma } from '@/lib/prisma';

export default async function handler(req, res) {
  if (req.method === 'POST') {
    try {
      const {
        shiftDate,
        cashSales,
        qrSales,
        grabSales,
        aroiDeeSales,
        discounts,
        refunds,
        amountBanked,
        notes,
        expenses,
      } = req.body;

      const result = await prisma.dailySales.create({
        data: {
          shiftDate: new Date(shiftDate),
          cashSales: parseFloat(cashSales),
          qrSales: parseFloat(qrSales),
          grabSales: parseFloat(grabSales),
          aroiDeeSales: parseFloat(aroiDeeSales),
          discounts: parseFloat(discounts),
          refunds: parseFloat(refunds),
          amountBanked: parseFloat(amountBanked),
          notes,
          expenses,
        },
      });

      res.status(200).json({ success: true, id: result.id });
    } catch (err) {
      console.error(err);
      res.status(500).json({ error: 'Failed to save sales form' });
    }
  } else {
    res.status(405).json({ error: 'Method not allowed' });
  }
}
ðŸ§¼ Styling Tip
Add this utility if needed:

css
Copy
Edit
.input {
  @apply border border-gray-300 rounded px-3 py-2 w-full;
}
âœ… Once This Is In:
Form 1 will collect and submit all required sales & expense data.

User is auto-redirected to /daily-stock?salesId=XXX to continue Form 2.