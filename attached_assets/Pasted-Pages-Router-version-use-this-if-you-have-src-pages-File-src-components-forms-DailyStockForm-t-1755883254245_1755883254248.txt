Pages Router version (use this if you have src/pages/…)

File: src/components/forms/DailyStockForm.tsx

import { useState } from "react";
import { useRouter } from "next/router";

type ReqItem = { name:string; category:string; unit:string; qty:number; costPerUnit:number };

export default function DailyStockForm({
  salesFormId,
  shiftId,
  initial,
}: {
  salesFormId?: string;
  shiftId?: string;
  initial?: any;
}) {
  const router = useRouter();
  const [rolls, setRolls] = useState<number>(Number(initial?.rollsCount ?? 0));
  const [meat, setMeat] = useState<number>(Number(initial?.meatWeightGrams ?? 0));
  const [requisition, setReq] = useState<ReqItem[]>(initial?.requisition ?? []);
  const [busy, setBusy] = useState(false);
  const [okMsg, setOkMsg] = useState<string>("");

  async function onSubmit(e: React.FormEvent) {
    e.preventDefault();
    setBusy(true);
    setOkMsg("");
    const payload = {
      salesFormId,
      shiftId,
      rollsCount: Number(rolls),
      meatWeightGrams: Number(meat),
      requisition: requisition
        .filter((r) => Number(r.qty) > 0)
        .map((r) => ({ ...r, qty: Number(r.qty), costPerUnit: Number(r.costPerUnit) })),
      completedBy: initial?.completedBy ?? "Manager",
    };

    const resp = await fetch("/api/daily-stock", { method: "POST", body: JSON.stringify(payload) });
    const data = await resp.json();
    setBusy(false);

    if (data?.ok) {
      setOkMsg("Stock saved.");
      setTimeout(() => setOkMsg(""), 4000);
      // ✅ Redirect to an existing page (no more /shift-summary 404)
      router.push("/daily-sales-library");
    } else {
      alert(data?.error ?? "Save failed");
    }
  }

  return (
    <form onSubmit={onSubmit} className="pb-20">
      {/* Your form fields for Rolls, Meat, and the requisition grid */}
      <div className="fixed bottom-0 inset-x-0 border-t bg-white p-3 flex justify-end gap-2">
        <button type="submit" disabled={busy} className="px-4 py-2 rounded-md border">
          {busy ? "Submitting..." : "Submit"}
        </button>
      </div>

      {!!okMsg && (
        <div className="fixed bottom-16 right-4 bg-green-50 border border-green-200 px-3 py-2 rounded-md">
          {okMsg}
        </div>
      )}
    </form>
  );
}

App Router version (use this if you have src/app/…)

File: src/components/forms/DailyStockForm.tsx

import { useState } from "react";
import { useRouter } from "next/navigation";

type ReqItem = { name:string; category:string; unit:string; qty:number; costPerUnit:number };

export default function DailyStockForm({
  salesFormId,
  shiftId,
  initial,
}: {
  salesFormId?: string;
  shiftId?: string;
  initial?: any;
}) {
  const router = useRouter();
  const [rolls, setRolls] = useState<number>(Number(initial?.rollsCount ?? 0));
  const [meat, setMeat] = useState<number>(Number(initial?.meatWeightGrams ?? 0));
  const [requisition, setReq] = useState<ReqItem[]>(initial?.requisition ?? []);
  const [busy, setBusy] = useState(false);
  const [okMsg, setOkMsg] = useState<string>("");

  async function onSubmit(e: React.FormEvent) {
    e.preventDefault();
    setBusy(true);
    setOkMsg("");
    const payload = {
      salesFormId,
      shiftId,
      rollsCount: Number(rolls),
      meatWeightGrams: Number(meat),
      requisition: requisition
        .filter((r) => Number(r.qty) > 0)
        .map((r) => ({ ...r, qty: Number(r.qty), costPerUnit: Number(r.costPerUnit) })),
      completedBy: initial?.completedBy ?? "Manager",
    };

    const resp = await fetch("/api/daily-stock", { method: "POST", body: JSON.stringify(payload) });
    const data = await resp.json();
    setBusy(false);

    if (data?.ok) {
      setOkMsg("Stock saved.");
      setTimeout(() => setOkMsg(""), 4000);
      // ✅ Redirect to an existing page (no more /shift-summary 404)
      router.push("/daily-sales-library");
    } else {
      alert(data?.error ?? "Save failed");
    }
  }

  return (
    <form onSubmit={onSubmit} className="pb-20">
      {/* Your form fields for Rolls, Meat, and the requisition grid */}
      <div className="fixed bottom-0 inset-x-0 border-t bg-white p-3 flex justify-end gap-2">
        <button type="submit" disabled={busy} className="px-4 py-2 rounded-md border">
          {busy ? "Submitting..." : "Submit"}
        </button>
      </div>

      {!!okMsg && (
        <div className="fixed bottom-16 right-4 bg-green-50 border border-green-200 px-3 py-2 rounded-md">
          {okMsg}
        </div>
      )}
    </form>
  );
}

Quick test

Submit Form 2.

You should land on /daily-sales-library (no 404).

Library should display the entry (with proper date/THB formatting from the patch).