1) Replace the root layout (single source of truth)
Create/overwrite src/app/layout.tsx with this:

tsx
Copy
Edit
// src/app/layout.tsx
import "./globals.css";
import type { ReactNode } from "react";
import Sidebar from "@/src/components/Sidebar";

export const metadata = { title: "Smash Brothers" };

export default function RootLayout({ children }: { children: ReactNode }) {
  return (
    <html lang="en">
      <body className="min-h-screen bg-[#f5f7f8]">
        {/* App shell: sidebar + content, no reserved margins */}
        <div className="min-h-screen flex">
          <Sidebar />
          <main className="flex-1 min-w-0">{children}</main>
        </div>
      </body>
    </html>
  );
}
Why this fixes it:

The page uses one flex row: fixed-width sidebar (shrink-0) + content (flex-1 min-w-0).

No margin-left/padding-left hacks, so no white strip when collapsed/open.

2) Add a proper sidebar component (collapsible, mobile friendly)
Create/overwrite src/components/Sidebar.tsx:

tsx
Copy
Edit
// src/components/Sidebar.tsx
"use client";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { useState } from "react";

const NAV = [
  {
    group: "Sales & Operations",
    items: [
      { label: "Dashboard", path: "/dashboard", color: "bg-emerald-500" },
      { label: "Daily Sales Form", path: "/daily-sales", color: "bg-orange-500" },
      { label: "Daily Stock Form", path: "/daily-stock", color: "bg-violet-500" },
      { label: "Receipts", path: "/receipts", color: "bg-blue-500" },
      { label: "Expenses (Business)", path: "/expenses", color: "bg-red-500" },
      { label: "System Status", path: "/system-status", color: "bg-green-500" },
    ],
  },
  // Add Finance later if needed
];

export default function Sidebar() {
  const [open, setOpen] = useState(true);
  const pathname = usePathname();

  const width = open ? "w-64" : "w-[78px]";
  const labelVis = open ? "opacity-100" : "opacity-0 pointer-events-none";
  const gap = open ? "gap-3" : "gap-0";

  return (
    <aside
      className={`shrink-0 ${width} transition-[width] duration-300 ease-in-out
                  bg-white border-r border-gray-200 flex flex-col`}
      style={{ boxShadow: "2px 0 12px rgba(0,0,0,0.03)" }}
    >
      {/* Header */}
      <div className="flex items-center justify-between px-4 py-4">
        <div className={`font-semibold tracking-tight text-gray-900 ${open ? "" : "sr-only"}`}>
          Smash Brothers
        </div>
        <button
          aria-label="Toggle sidebar"
          onClick={() => setOpen(o => !o)}
          className="rounded-lg border border-gray-200 px-2 py-1 text-xs hover:bg-gray-50"
        >
          {open ? "‹" : "›"}
        </button>
      </div>

      {/* Nav */}
      <nav className="px-3 pb-6 overflow-y-auto">
        {NAV.map(section => (
          <div key={section.group} className="mb-5">
            <div className={`text-[11px] font-semibold uppercase tracking-wide text-gray-400 px-2 mb-2 ${open ? "" : "sr-only"}`}>
              {section.group}
            </div>
            <ul className="space-y-2">
              {section.items.map(item => {
                const active = pathname?.startsWith(item.path);
                return (
                  <li key={item.path}>
                    <Link
                      href={item.path}
                      className={`flex items-center ${gap} rounded-xl px-2 py-2
                                  hover:bg-gray-50 border border-transparent
                                  ${active ? "bg-emerald-50 border-emerald-200" : ""}`}
                    >
                      <span className={`h-3 w-3 rounded ${item.color}`} />
                      <span className={`text-sm text-gray-800 transition-opacity ${labelVis}`}>
                        {item.label}
                      </span>
                    </Link>
                  </li>
                );
              })}
            </ul>
          </div>
        ))}
      </nav>
    </aside>
  );
}
Key points:

Fixed widths: 256px open → 78px collapsed.

No icon library needed; small color dot keeps your current look.

Active route highlights with emerald tint.

Works on tablet/desktop; for phones, Next can render a top burger later if you want.

3) Remove residual page-level margins (quick sweep)
Some pages probably have hard-coded left margins from the old layout. Do a quick find and delete:

Search your codebase for any of these and remove them from pages:

ml-64, pl-64, ml-[256px], pl-[256px]

layout wrappers using grid-cols-[280px_1fr]

containers with max-w-[1200px] mx-auto that also add a left gutter to “clear” the sidebar

Your page content should start with no sidebar-specific margin. If you keep a centered container (like the dashboard), that’s fine as long as it doesn’t reserve a left gutter.

4) (Optional) Make the sidebar sticky
Add className="sticky top-0 min-h-screen" to the <aside> if you want it to stay fixed while the content scrolls:

tsx
Copy
Edit
<aside className={`sticky top-0 min-h-screen shrink-0 ${width} ...`}>
5) Lock out surprise changes (so this doesn’t regress again)
Keep AGENT_READONLY=1 in Replit for the instance the agent touches.

Protect src/app/layout.tsx and src/components/Sidebar.tsx with a simple script in package.json that fails builds if either file is modified without your approval (I can add it if you want).