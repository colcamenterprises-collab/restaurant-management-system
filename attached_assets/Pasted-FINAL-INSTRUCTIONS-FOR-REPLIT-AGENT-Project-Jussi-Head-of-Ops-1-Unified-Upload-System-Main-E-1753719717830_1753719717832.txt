FINAL INSTRUCTIONS FOR REPLIT AGENT
Project: Jussi â€“ Head of Ops
ğŸ” 1. Unified Upload System (Main Entry)
Location: Reports & Analysis main tab, not inside a sub-tool.

UI Placement: Directly below the tab buttons (Reporting / Analysis / Stock Summary)

Type: Single file uploader (CSV only)

Label: â€œğŸ“¤ Upload POS or Sales Fileâ€

ğŸ” Detection Logic:
Use filename to detect file type:

Keywords like shift, register, pos â†’ POS Shift Report

Keywords like sales, stock, form â†’ Daily Sales & Stock Form

Store the data temporarily in memory as:

ts
Copy
Edit
{
  shiftData: { date: "YYYY-MM-DD", content: [...] },
  salesData: { date: "YYYY-MM-DD", content: [...] }
}
âœ… Action Triggers:
When both files for the same shift_date exist:

Automatically run comparison logic

Save results to analysis DB (or state)

Display high-level output summaries in the Analysis page boxes

ğŸ“Š 2. Output Summary Display in Analysis Page
Card: Shift vs Daily Comparison

Show:

âœ… â€œMatchedâ€ if values align within Â±50 THB

â— â€œDiscrepancy Detectedâ€ if over threshold

Add a small link/text: â€œView Reportâ€ to show full breakdown in modal

ğŸ’¬ 3. AI Chat Window for Deeper Questions (Optional)
Location: Analysis page bottom-right

Button: ğŸ’¬ â€œAsk Jussiâ€

Launches a floating chat

Purpose:

Ask Jussi things like:

â€œWhy is Grab sales different?â€

â€œShow me all variances in cash paymentsâ€

â€œWas the POS total higher than the manual report?â€

Chat can either:

Work with OpenAI API + system prompt and latest parsed data

Or use a local rules engine for now (start simple)

ğŸ“ Suggested UI Instruction Under Uploader:
Upload any .csv file for analysis.
Jussi will automatically detect the file type, match files by date, and show results in the Analysis panel.
Use filenames like shift_2025-07-28.csv or sales_form_2025-07-28.csv.

âš™ï¸ Supporting Notes
All processing is client-side or server-memory (no DB write required unless logging reports)

Match by extracted shift_date field or inferred from filename

All reports can be stored to Daily Report Library if logging is desired