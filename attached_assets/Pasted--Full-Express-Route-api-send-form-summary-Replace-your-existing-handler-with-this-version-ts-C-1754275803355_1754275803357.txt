ğŸ”§ Full Express Route: /api/send-form-summary
Replace your existing handler with this version:

ts
Copy
Edit
import express from 'express';
import { sendEmailWithAttachment } from '../services/workingEmailService';
import PDFDocument from 'pdfkit';
import getStream from 'get-stream';

const router = express.Router();

router.post('/api/send-form-summary', async (req, res) => {
  try {
    const { formData } = req.body;
    if (!formData) {
      return res.status(400).json({ message: 'Missing form data' });
    }

    const emailTo = 'smashbrothersburgersth@gmail.com';

    // HTML Body
    const htmlBody = `
      <h2>ğŸ“‹ Smash Brothers Burgers - Daily Shift Report</h2>
      <table border="1" cellpadding="6" cellspacing="0" style="border-collapse: collapse; font-family: Arial; font-size: 14px;">
        ${Object.entries(formData)
          .map(([key, val]) => `<tr><td><strong>${key}</strong></td><td>${JSON.stringify(val)}</td></tr>`)
          .join('')}
      </table>
    `;

    // PDF generation
    const doc = new PDFDocument();
    doc.fontSize(18).text('Smash Brothers Burgers - Daily Shift Report', { underline: true });
    doc.moveDown();

    Object.entries(formData).forEach(([key, val]) => {
      doc.fontSize(12).text(`${key}: ${JSON.stringify(val)}`);
    });

    const pdfBuffer = await getStream.buffer(doc);

    // Send email
    await sendEmailWithAttachment({
      to: emailTo,
      subject: `ğŸ“‹ Daily Form Submitted - ${formData.shiftDate} by ${formData.completedBy}`,
      html: htmlBody,
      attachments: [
        {
          filename: `SBB-DailyReport-${formData.shiftDate}.pdf`,
          content: pdfBuffer,
        },
      ],
    });

    return res.status(200).json({ message: 'Email and PDF sent successfully' });
  } catch (err) {
    console.error('âŒ Email sending failed:', err);
    return res.status(500).json({ message: 'Error sending form email', error: err });
  }
});

export default router;
ğŸ§© Dependencies Required
If not already installed:

bash
Copy
Edit
npm install pdfkit get-stream
ğŸ“§ Email Output
Clean HTML table in the email body

PDF with all form data, same structure

