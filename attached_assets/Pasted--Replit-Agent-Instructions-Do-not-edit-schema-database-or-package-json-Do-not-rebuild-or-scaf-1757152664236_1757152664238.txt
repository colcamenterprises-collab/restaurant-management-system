ğŸ›‘ Replit Agent Instructions

Do not edit schema, database, or package.json.

Do not rebuild or scaffold new forms.

Do not touch .bak or backup files.

Apply exactly the changes below.

If you hit a blocking error (e.g. DB insert fails), STOP and ask Cam â€” do not improvise.

1. Archive Legacy Files
client/src/pages/DailySales.tsx

Rename â†’ client/src/pages/DailySales.legacy.tsx
At the top of the file, add:

// ğŸš« LEGACY FILE â€” DO NOT USE
// Archived. Use V2 Form.tsx at /operations/daily-sales instead.

server/api/daily-sales.ts

Rename â†’ server/api/daily-sales.legacy.ts
At the top of the file, add:

// ğŸš« LEGACY ENDPOINT â€” DO NOT USE
// Archived. Use server/forms/dailySalesV2.ts instead.

2. Lock Golden Files

At the very top of each of these, add:

// ğŸš« GOLDEN FILE â€” DO NOT MODIFY WITHOUT CAMâ€™S APPROVAL
// Active Daily Sales & Stock system (V2).


client/src/pages/operations/daily-sales/Form.tsx

server/forms/dailySalesV2.ts

client/src/pages/operations/daily-sales-v2/Library.tsx

3. Fix Routing
client/src/routes.tsx (or App.tsx depending on your setup)

Replace the Daily Sales route section with:

import DailySalesForm from "@/pages/operations/daily-sales/Form";
import DailyStock from "@/pages/operations/DailyStock";
import DailySalesLibrary from "@/pages/operations/daily-sales-v2/Library";

export const routes = [
  { path: "/operations/daily-sales", element: <DailySalesForm /> },
  { path: "/operations/daily-stock", element: <DailyStock /> },
  { path: "/operations/daily-sales-library", element: <DailySalesLibrary /> },
  // â€¦other routes unchanged
];

4. Sidebar Menu
client/src/components/Sidebar.tsx

Ensure only one entry for Daily Sales, and it points to the golden route:

{ name: "Daily Sales & Stock", href: "/operations/daily-sales" },
{ name: "Daily Stock", href: "/operations/daily-stock" },
{ name: "Daily Sales Library", href: "/operations/daily-sales-library" },


Delete any duplicate â€œDaily Salesâ€ entries or legacy references.

5. Expected Outcome

/operations/daily-sales â†’ loads your preserved rolled-back form (working version).

Submission â†’ saves into daily_sales_v2 (via server/forms/dailySalesV2.ts).

/operations/daily-sales-library â†’ shows new records with balanced badge.

Email + shopping list fire correctly.

Sidebar â†’ always routes to golden files, never legacy.

Legacy files are archived, marked with ğŸš«, and disconnected from routes.